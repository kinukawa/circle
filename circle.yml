machine:
  environment:
    XCODE_SCHEME: circle
    XCODE_WORKSPACE: ./circle.xcworkspace
    LANG: en_US.UTF-8
  xcode:
    version: "7.0"

test:
  override:
    - xctool
      -reporter pretty
      -reporter junit:$CIRCLE_TEST_REPORTS/xcode/results.xml
      -reporter plain:$CIRCLE_ARTIFACTS/xctool.log
      CODE_SIGNING_REQUIRED=NO
      CODE_SIGN_IDENTITY=
      PROVISIONING_PROFILE=
      -destination 'platform=iOS Simulator,name=iPhone 6,OS=latest'
      -sdk iphonesimulator
      -workspace "$XCODE_WORKSPACE"
      -scheme "$XCODE_SCHEME"
      build build-tests run-tests

  #  - set -o pipefail &&
  #    xcodebuild
  #      CODE_SIGNING_REQUIRED=NO
  #      CODE_SIGN_IDENTITY=
  #      PROVISIONING_PROFILE=
  #      -sdk iphonesimulator
  #      -scheme 
  #      -workspace "$XCODE_WORKSPACE"
  #      clean build test |
  #    tee $CIRCLE_ARTIFACTS/xcode_raw.log |
  #    xcpretty -c --report junit --output $CIRCLE_TEST_REPORTS/xcode/result.xml
